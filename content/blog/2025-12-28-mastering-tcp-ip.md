---
title: 'マスタリング TCP / IP 入門編 第 5 版 を読んだ'
excerpt: '新卒以来 6 年以上積んでいたであろう入門書を読んだ。'
date: '2025-12-28'
tags: ['Reading']
readTime: '5 min read'
published: false
---

# 前置き

マスタリング TCP / IP 入門編 **第 5 版** を読んだので章単位で要点をまとめます。ちなみにこの本は 2012 年に書かれたもので、購入した時点では既に第 6 版が出ていたっぽい...まぁいいでしょう。

# 1 章

OSI 参照モデルというものがある。これは通信に必要な機能を 7 つのレイヤーに分けてモデル化したもの。それぞれのレイヤーごとにプロトコルが存在する。

通信方式には回線交換方式とパケット交換方式がある。前者の場合は回線の数分のコンピューターしか通信ができないのに対して、後者は ONU 内部でキューに対してパケットが enqueue される。こうすることで複数のコンピューターからのパケットをキューに詰めて非同期で ONU から基地局に向けて通信が行われる。

## 深掘りしてみた

実際に日本在住の A さんからアメリカ在住の B さんにどうやってデータが届くのかをざっくりでいいから理解する。

コンピューター -> ルーター: PC などによって送信される 0, 1 のバイナリデータを変調することで、波 (電波) としてルーターに届く。

ルーター -> ONU: ここは LAN ケーブル (8 本 4 ペアの銅線) で繋がっている。また、下りの波 (受信データ) と上りの波 (送信データ) が混ざらないようにエコーキャンセル (上り下りで波が衝突するため、波の合成 / 分解を利用して必要な波長を計算する。) によって聞き分けている。

ONU -> 基地局: ONU でパケットはキューイングされ非同期で基地局に向かって光ファイバーの中を伝っていく。基地局までの間の光ファイバーの中は上りと下りで波長によって衝突が起きないようになっている。PON (passive optical network) というらしい。

基地局 -> 各種ルーター: 地域のルーター, 東京のルーター, 国際通信用ルーターと、数十回ほどルーターを経由する。基地局から先はコアネットワークという呼ばれる部分で、PON ではなく専用線でやり取りされる。

各種ルーター -> 海底ケーブル: この光は中継機を伝いつつアメリカまで届く。中継機の中にはエルビウムというレアアースが埋め込んであって、受信した光と同じ波長の光を放ってくれるらしい。

海底ケーブル -> B さんのコンピュータ: これまでのプロセスの逆。

# 2 章

現代では 1 章で習った OSI ではなく TCP / IP が普及している。また、TCP / IP は OSI の参照モデルにおけるレイヤーに対応するものとして、

|OSI|TCP / IP|
|-|-|
|アプリケーション層|アプリケーション層|
|プレゼンテーション層|アプリケーション層|
|セッション層|アプリケーション層|
|トランスポート層|トランスポート層|
|ネットワーク層|インターネット層|
|データリンク層|ネットワークインターフェース層|
|物理層|(ハードウェア)|

という対応になっているようだ。後述の解説でより分かるが TCP / IP プロトコルは、実際にプロトコルをコンピュータに実装するにはどのようにプログラミングすれば良いかに主眼を置いて考えられている。

ネットワークインターフェース層: デバイスドライバー。ハードウェアである NIC を動かすために、OS とハードウェアの間の橋渡しをするドライバーだと思って良い。

インターネット層: IP プロトコル。コンピュータの OS に組み込まれるもの。

トランスポート層: TCP, UDP。TCP はコネクション型で UDP はコネクションレス型。HTTP/1.1 or HTTP/2 を使うと自動的に TCP を使っていることになる。ちなみに HTTP/3 は QUIC。リアルタイムサーバーである Photon とかだと UDP を使っている。アプリケーションレイヤーのプロトコルは Photon の独自規格である Photon Protocol というものらしい。ちなみに途中でパケットが消失したりすることを許容しないのが TCP。許容するのが UDP。

アプリケーション層: OSI の L5 ~ 7 がここに入る。HTTP, HTML, FTP, SSH など幅広い領域で様々なプロトコルが存在する。

# 3 章
